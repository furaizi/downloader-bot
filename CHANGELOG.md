# Changelog

## [0.2.0](https://github.com/furaizi/downloader-bot/compare/v0.1.0...v0.2.0) (2025-10-04)


### Features

* **ci:** add CI/CD ([c99f9ed](https://github.com/furaizi/downloader-bot/commit/c99f9ed4c6ba1e541cf9cc9c1c39e6d9cb3dfcbd))
* **ci:** publish Docker image to GHCR ([6f623ce](https://github.com/furaizi/downloader-bot/commit/6f623ce3f36db799b7470f924628312777ffc66f))

## [0.1.0](https://github.com/furaizi/downloader-bot/compare/v0.0.1...v0.1.0) (2025-10-04)


### Features

* add Instagram Reels provider and yt-dlp cookies/user-agent support ([9c9e98d](https://github.com/furaizi/downloader-bot/commit/9c9e98d43d0292c2012b4ce992ea10c3223f6ac6))
* add Instagram Reels provider and yt-dlp cookies/user-agent support ([1d73305](https://github.com/furaizi/downloader-bot/commit/1d733050d57093b2a6a9961fbb289085f9c59331))
* **bot:** add chat type detection and URL validation for private/group chats ([1de793e](https://github.com/furaizi/downloader-bot/commit/1de793e2d5d5588b2388f9c37cf3a099cdc7f4b2))
* **bot:** add fail-fast check for TELEGRAM_BOT_TOKEN on startup ([145b851](https://github.com/furaizi/downloader-bot/commit/145b851a915e2930a50a99275230b795293163bb))
* **bot:** add fileId support for albums and refactor media send methods ([bb595fb](https://github.com/furaizi/downloader-bot/commit/bb595fbc1e8a9d35edd2e699b85ce025f7ee004c))
* **bot:** add fileId-based media sending and extend Media with Telegram IDs ([e893ccf](https://github.com/furaizi/downloader-bot/commit/e893ccf3cdee246a51f9e28af4a2b3933b203101))
* **bot:** add GlobalTelegramExceptionHandler and map domain errors to user messages ([d5d8dae](https://github.com/furaizi/downloader-bot/commit/d5d8dae70a9b6b4b1d3c0f04ef41fc1908cf97c6))
* **bot:** add UrlNormalizer for download command ([47aecba](https://github.com/furaizi/downloader-bot/commit/47aecbac649cc2f94d5fe4bd65a5e20f65cf5e46))
* **bot:** add YouTube Shorts support ([a4e7672](https://github.com/furaizi/downloader-bot/commit/a4e76725e883fe76ed7911eb10309b0e0e2e68f7))
* **bot:** handle BusyException with user-friendly message ([96cf951](https://github.com/furaizi/downloader-bot/commit/96cf9515c9544796f14f73a9c215dfb75f89bf88))
* **bot:** launch commands in separate coroutines ([a393675](https://github.com/furaizi/downloader-bot/commit/a3936752bff369765cc7deb1d56ab4692be2f332))
* **bot:** support reply-to message context in Telegram responses ([5372e34](https://github.com/furaizi/downloader-bot/commit/5372e346c1f47c18b5881cde20821fccb3bf781c))
* **bot:** translate English and Russian text of commands to Ukrainian ([be26068](https://github.com/furaizi/downloader-bot/commit/be260684059a81f97be2a9a78b932ed87811ede2))
* **bot:** translate English error messages to Ukrainian ([b7ff462](https://github.com/furaizi/downloader-bot/commit/b7ff462304a38300bcfbf4bb0c221ec42c5490a2))
* **cache:** add reverse index and eviction by file path ([79e4acb](https://github.com/furaizi/downloader-bot/commit/79e4acb6c7145810845447345a2aa4b0556d76e8))
* **command:** add CommandRegistry ([97b8191](https://github.com/furaizi/downloader-bot/commit/97b8191e18f27a0c484d52f16c9e677f5cf1cd37))
* **command:** validate input URL in DownloadCommand ([781aa9b](https://github.com/furaizi/downloader-bot/commit/781aa9bb0b4c63651cfb8f1f5ea4b9940a145614))
* **concurrency:** add download slots to limit concurrent downloads ([688dfca](https://github.com/furaizi/downloader-bot/commit/688dfca08688fb1421adc9d43cb988620f8ffe4c))
* **concurrency:** add exception handling coroutine scope ([9de8d11](https://github.com/furaizi/downloader-bot/commit/9de8d11d168543da2461c912ff51c3f337d08111))
* **concurrency:** use download slots in CachedMediaDownloadService ([b2e37f2](https://github.com/furaizi/downloader-bot/commit/b2e37f2ed2c86445f5901fc00e127c99b752a8fa))
* **config:** add 'dev' profile ([a62c2db](https://github.com/furaizi/downloader-bot/commit/a62c2db113b7c27d5aa6f93693b83bf719c6dba6))
* **config:** add configurable timeout for yt-dlp and gallery-dl tools ([c4ef99f](https://github.com/furaizi/downloader-bot/commit/c4ef99f60229de8f09b063e2e84b7297a778963d))
* **config:** add Instagram Reels support ([7b35cf1](https://github.com/furaizi/downloader-bot/commit/7b35cf11496057f94fffc261af5b808ae4e4ba03))
* **config:** add instaloader configuration section ([de96ba9](https://github.com/furaizi/downloader-bot/commit/de96ba96ba0a47776f004c30fd20b2adaa51b8da))
* **config:** add max-size settings for photo and video ([57d0068](https://github.com/furaizi/downloader-bot/commit/57d0068e5d43c2ab0ed991cdb22916031c3fe729))
* **config:** add media size limit properties for photo and video ([9e32346](https://github.com/furaizi/downloader-bot/commit/9e323461baa8ce1cce3dce32d573e5ffb15c7016))
* **config:** allow Instagram reel URLs for download ([0f08f68](https://github.com/furaizi/downloader-bot/commit/0f08f681eee3c4f23f8dea68ecb6fa2e3d78d8cf))
* **core:** add MediaTooLargeException for oversized media files ([5811f31](https://github.com/furaizi/downloader-bot/commit/5811f31d595bbc58a0e39def92b16d427a1eff2d))
* **core:** add scheduled cleanup service with configurable limits ([25ee97a](https://github.com/furaizi/downloader-bot/commit/25ee97a01e93316d9cfad3ea72005d33d8d4c279))
* **core:** add timeout handling and process tree kill for CLI tools ([004297b](https://github.com/furaizi/downloader-bot/commit/004297b2d3cb85f745fabea2c928544202cd8382))
* **core:** enforce URL allowlist for downloads ([0c2c331](https://github.com/furaizi/downloader-bot/commit/0c2c3316475103e5d23c176b39aafdde86808860))
* **core:** resolve final download url ([530169f](https://github.com/furaizi/downloader-bot/commit/530169fce1692e9ab2a53be349bca71aa10310b6))
* **devops:** add busybox stage to dockerfile ([4ee7f3d](https://github.com/furaizi/downloader-bot/commit/4ee7f3d70a125d14153b51c010edd29b8f24a6ad))
* **devops:** add Prometheus and Grafana services ([45c9012](https://github.com/furaizi/downloader-bot/commit/45c9012f56c992a7c1ea4e68972103b6db246070))
* **devops:** add Prometheus config ([0476ab9](https://github.com/furaizi/downloader-bot/commit/0476ab9ff5b02fad1696c5858ef84860a533bfb9))
* **devops:** add resource limits and health checks ([2a3a06b](https://github.com/furaizi/downloader-bot/commit/2a3a06b056a803b6701ea11d8cb74d7b252c74c1))
* **docker:** add docker compose file and update profile configs ([a99e432](https://github.com/furaizi/downloader-bot/commit/a99e4320325b45eb38346264fcff613e8fd7cdb6))
* **docker:** add instaloader, ffmpeg, yt-dlp stages to Dockerfile ([c298b10](https://github.com/furaizi/downloader-bot/commit/c298b10e2785cad6f8b7f6ae3ae71ac89375fd40))
* **download:** add Redis-based per-URL locking to prevent duplicate downloads ([4043706](https://github.com/furaizi/downloader-bot/commit/404370695f11e5845142ceca6c5199d9449fc6e7))
* **downloader:** add toggle to enable/disable gallery-dl and yt-dlp ([dabb1d6](https://github.com/furaizi/downloader-bot/commit/dabb1d696ee0400b545403b71b54e02c225dd74e))
* **downloader:** add toggle to enable/disable gallery-dl and yt-dlp ([3224180](https://github.com/furaizi/downloader-bot/commit/32241801255005c22a9ea6f1fc47fd9768c219e1))
* **exception:** introduce new ToolTimeoutException ([51aa89b](https://github.com/furaizi/downloader-bot/commit/51aa89b0b239be0afa3426a536816efb3671cd53))
* **exception:** introduce user-friendly timeout exception message ([caad126](https://github.com/furaizi/downloader-bot/commit/caad12681bbac7be721aaf2344c1dbb9e5848c79))
* **gateway:** add GatewayResult sealed class for gateway response handling ([768ed4e](https://github.com/furaizi/downloader-bot/commit/768ed4e351fe0121b2ab467d9cf9466f65d8f2e0))
* **gateway:** add mappers to convert Telegram and HTTP results to GatewayResult ([a193390](https://github.com/furaizi/downloader-bot/commit/a1933902d6ff0aff2a70062de7f67883d9884f08))
* **gateway:** return GatewayResult from BotPort methods ([8ddf8eb](https://github.com/furaizi/downloader-bot/commit/8ddf8eb2f0eb8f87ee8bda035dbbf4bff7d7bd16))
* **gateway:** return GatewayResult from TelegramBotAdapter methods ([e89acfa](https://github.com/furaizi/downloader-bot/commit/e89acfa800958971fade57b66a40e3d6508b8e2a))
* **instaloader:** add download and probe functionality with JSON parsing ([aa27951](https://github.com/furaizi/downloader-bot/commit/aa27951f7ffe88b16eefb1c50900bdac9ce178b7))
* **instaloader:** add orchestrator and path generator for Instagram downloads ([1e00efa](https://github.com/furaizi/downloader-bot/commit/1e00efa2cd1a953359c4822f6616e7e55d20219b))
* **instaloader:** add session file and user-agent support via Docker secrets ([67dbe4a](https://github.com/furaizi/downloader-bot/commit/67dbe4a533559f4fb219bf6107c69362ffc33ebb))
* **instaloader:** add session file and user-agent support via Docker secrets ([cc9036b](https://github.com/furaizi/downloader-bot/commit/cc9036b07a3efaa1f1607eff5951002c5cac8d38))
* **json:** improve JSON extraction with detailed logging and MDC ([e137dda](https://github.com/furaizi/downloader-bot/commit/e137dda098baf75122c8ffa76c635310237b35aa))
* **logging:** enhance logging, timing, and provider configuration ([4afe5c9](https://github.com/furaizi/downloader-bot/commit/4afe5c94540a5072bc61c5c609735916e93abc85))
* **process:** add timing and detailed logging to DefaultProcessRunner ([59c83ae](https://github.com/furaizi/downloader-bot/commit/59c83ae781b9f4c525eadf7db1cf0bf1667d1e43))
* **props:** add default-command config property ([0fd02c2](https://github.com/furaizi/downloader-bot/commit/0fd02c2a2ef1df5448c0b01f375f511beb981434))
* **props:** introduce Instaloader properties ([a373414](https://github.com/furaizi/downloader-bot/commit/a373414a0e80e5dc9362dcd9bc54ecb854cc45d2))
* **ratelimit:** add Bucket4J configuration class ([8301ade](https://github.com/furaizi/downloader-bot/commit/8301ade9fded9db218ea322b1d429f93ea39ede6))
* **ratelimit:** add config fingerprint to bucket keys for automatic updates ([3a61ed3](https://github.com/furaizi/downloader-bot/commit/3a61ed337dc4e8d699a5953217752587b4481adc))
* **ratelimit:** add logging ([3c6be75](https://github.com/furaizi/downloader-bot/commit/3c6be75dfdd1ff7aa3181c1d1b9cf68c997abe29))
* **ratelimit:** add properties class ([4235cd4](https://github.com/furaizi/downloader-bot/commit/4235cd4b743e22076394ad3b982da0918b0ebcdb))
* **ratelimit:** add properties to application.yml ([3f66fef](https://github.com/furaizi/downloader-bot/commit/3f66fefdc4885bba1f404c073bb44d71fbcaea13))
* **ratelimit:** add rate limiting guard ([c585c75](https://github.com/furaizi/downloader-bot/commit/c585c75906d7456f9bb8b1a7c8eeed03ac17de17))
* **ratelimit:** add rate limiting to the bot ([d6f019e](https://github.com/furaizi/downloader-bot/commit/d6f019e97909e2c78b748a423741d9a0f05c2987))
* **ratelimit:** implement Bucket4J rate limiter ([afa55a3](https://github.com/furaizi/downloader-bot/commit/afa55a3d4cf9401624f62e52547383287c6c278e))
* **ratelimit:** introduce fingerprint method for rate limit properties ([fd21957](https://github.com/furaizi/downloader-bot/commit/fd21957642f75e794da01a123cee74a822cdeb01))
* **ratelimit:** tighten the limit on numbers of processed messages in the group ([1f43c3f](https://github.com/furaizi/downloader-bot/commit/1f43c3f50bd3925f867755c0d2d2ed23e4c6e5ce))
* **security:** enforce URL allowlist for downloads ([c55e80e](https://github.com/furaizi/downloader-bot/commit/c55e80e7ab530312e7970c8aa37db3d6e193aea5))
* **utils:** add human-readable duration formatting and improve process logging ([1e8bef6](https://github.com/furaizi/downloader-bot/commit/1e8bef66d3bf8b5ccc354be062fe0dd82cabe9e1))
* **yt-dlp:** add support for approximate file size and update limit check ([78936d0](https://github.com/furaizi/downloader-bot/commit/78936d0a31ebb427506948abcea2da66155a7989))
* **yt-dlp:** do not allow downloading video with unknown filesize ([4f910ff](https://github.com/furaizi/downloader-bot/commit/4f910ff01a82ebf71aaf41bc05546d6eeffc6ae3))
* **ytdlp:** add video size limit check with MediaTooLargeException ([8bcf4c1](https://github.com/furaizi/downloader-bot/commit/8bcf4c14116a2d5e44cfe57586f30350874cd98c))
* **ytdlp:** make format optional and remove default from config ([91ffddc](https://github.com/furaizi/downloader-bot/commit/91ffddc96c42482592a1b03cc56be05c09b64643))


### Bug Fixes

* **allowlist:** validate URLs with query parameters correctly ([a059d0e](https://github.com/furaizi/downloader-bot/commit/a059d0ee1f07c268d7a2740c715183ad59b815a3))
* **bot:** handle CancellationException properly and improve logging context ([fde9e3a](https://github.com/furaizi/downloader-bot/commit/fde9e3a4aeb255a2fe69a865dda6eccd75c223d6))
* **bot:** handle properly /download usecase when no args are provided ([f43bf04](https://github.com/furaizi/downloader-bot/commit/f43bf042fc62fe3779324e6ac258474778537f4c))
* **bot:** improve URL handling and chat type detection in DownloadCommand ([7662446](https://github.com/furaizi/downloader-bot/commit/766244678e750a3565cd97064169485ddb8193f7))
* **bot:** react only to http(s) urls in group chats ([0c4069c](https://github.com/furaizi/downloader-bot/commit/0c4069cf02d19dec640c2c2b633f6dec0888a3ef))
* **bot:** react only to http(s) urls in group chats ([dc277a3](https://github.com/furaizi/downloader-bot/commit/dc277a3434e8752afea2c54394427bee7035d340))
* **bot:** support TikTok short URLs in group chats via UrlResolver ([d847e19](https://github.com/furaizi/downloader-bot/commit/d847e19dbb0ce6011a2f0ac061ee1e2560cfc975))
* **build:** downgrade Retrofit version to 2.9.0 to pass CI ([2404a7a](https://github.com/furaizi/downloader-bot/commit/2404a7a4ed486cfa33831da0cd2e090c8c20cd02))
* **ci:** pass raising spring context test ([163cd44](https://github.com/furaizi/downloader-bot/commit/163cd44d28be67eec86d2e80b79093f784d78d4d))
* **ci:** passing raising spring context test ([4e375c1](https://github.com/furaizi/downloader-bot/commit/4e375c106b858c03715a52bae7449c2d032a65e7))
* **ci:** project compiling issue ([618932b](https://github.com/furaizi/downloader-bot/commit/618932bc64e42e1d40087bacda6264920485877f))
* **ci:** use composite action, not workflow ([521e813](https://github.com/furaizi/downloader-bot/commit/521e8136d77ae3647d21f6cbfd5f0f1341d919ac))
* **ci:** use release-please tag for version ([#84](https://github.com/furaizi/downloader-bot/issues/84)) ([08157ee](https://github.com/furaizi/downloader-bot/commit/08157eefcfbdcff80953a45f673be23096ef1b6b))
* **ci:** validate CI when PR is by 'release-please' action ([#86](https://github.com/furaizi/downloader-bot/issues/86)) ([8343e19](https://github.com/furaizi/downloader-bot/commit/8343e19bda1785957398e66c8eef9f27172b33e0))
* **cleanup:** evict cache after cleanup ([06d0b1c](https://github.com/furaizi/downloader-bot/commit/06d0b1c9cd3c8a3a3dcd5acaff0c5dc3d04225b8))
* **cleanup:** evict cache entries when media files are deleted ([e44b2a5](https://github.com/furaizi/downloader-bot/commit/e44b2a5ecc83a41a0bb0a2e68fdfcb52ed2b2096))
* **compose:** add .txt extention to ytdlp-cookies file ([deb6b4e](https://github.com/furaizi/downloader-bot/commit/deb6b4e10de60cc0301c1245aa6f42aabc36e118))
* **config:** add 'prod' profile; restrict actuator; move to port 8081 ([4727e73](https://github.com/furaizi/downloader-bot/commit/4727e73ef29c0655a1afad0f1183bbd96bfec2a3))
* **config:** feature toggle for MediaProviders ([a573919](https://github.com/furaizi/downloader-bot/commit/a573919b8f92c5cffe0b69dfae3ec43b8a30a9af))
* **config:** remove talkative actuator from default profile ([00e9387](https://github.com/furaizi/downloader-bot/commit/00e9387de8b7285fb168791b6d60cf10c190c4ae))
* **config:** token env variable name mismatch ([cb375d7](https://github.com/furaizi/downloader-bot/commit/cb375d73cb18f145406ba4cb7816c2cf28755a30))
* **detekt:** remove unused logger in BotConfig ([97e7dd7](https://github.com/furaizi/downloader-bot/commit/97e7dd7893c54d01080f8ed6202b5d1e5a725f43))
* **devops:** set up correct Prometheus path in Spring Boot application ([b32cdaa](https://github.com/furaizi/downloader-bot/commit/b32cdaa7f44741591124fe4ae7e6f6cccace09c3))
* disable YouTube Shorts support and download gallery-dl to image properly ([111b8be](https://github.com/furaizi/downloader-bot/commit/111b8bed34b86e0eedb304e06a793ed1024be591))
* **docker:** add fix-perms service dependency for app startup ([1ac57e0](https://github.com/furaizi/downloader-bot/commit/1ac57e0b47c99775fb852416b66fca3120e08126))
* **docker:** add gallery-dl binary to image ([74944bd](https://github.com/furaizi/downloader-bot/commit/74944bda1c6fc06f39e2b18f6c645498b28b5ae0))
* **instaloader:** support both /reel and /reels URLs and improve args handling ([995b0a7](https://github.com/furaizi/downloader-bot/commit/995b0a71988103ce28623216c095f0f7012f5021))
* **ktlint:** remove unused import in BotConfig ([821540d](https://github.com/furaizi/downloader-bot/commit/821540d9b5c0ee8f51ea2116f7d3e5caba226c1b))
* **logging:** do not log every incoming message in chats ([dc1e376](https://github.com/furaizi/downloader-bot/commit/dc1e3768ce8943948b14f72d1b634ff3696f6401))
* **logging:** do not log every incoming message in chats ([8958c01](https://github.com/furaizi/downloader-bot/commit/8958c015a6cc31accda5408b106a0cbdb02c7946))
* **media:** add EmptyMedia fallback for probe errors, simplify Redis script ([fc47dc6](https://github.com/furaizi/downloader-bot/commit/fc47dc66eb31257067e5f5285dfa2ddf5c18aea1))
* **provider:** return proper media placeholder for different downloaders ([e2f5652](https://github.com/furaizi/downloader-bot/commit/e2f5652958eada66802add63ffa5a987d0940404))
* **ratelimit:** add TooManyRequestException and guard all commands with RateLimitGuard ([19a6dc8](https://github.com/furaizi/downloader-bot/commit/19a6dc82908ef3eeb05a8df5b912c0fdebcf5c45))
* **ratelimit:** correct chat cooldown behavior ([3360111](https://github.com/furaizi/downloader-bot/commit/3360111f7ef2eb89e31a9ba6a708107b3e33e8b8))
* **ratelimit:** make user chat limits 'greedy' ([85383be](https://github.com/furaizi/downloader-bot/commit/85383be9fe8d27603b37625b7fa3f161fefb0b22))
* **service:** do not create 2 DefaultMediaDownloadService ([fb52e3f](https://github.com/furaizi/downloader-bot/commit/fb52e3f184ecf1358b899cb733d12b1a2b3caabb))
* **yt-dlp:** avoid .webm format when downloading videos from youtube ([ffcbcde](https://github.com/furaizi/downloader-bot/commit/ffcbcde4fd934349efe2fb1e6e14e5bc313199a4))
