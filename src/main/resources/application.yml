spring:
  application:
    name: downloader-bot
  config:
    import:
      - optional:file:.env[.properties]
      - file:config/sources.yml
  profiles:
    default: dev
  jackson:
    property-naming-strategy: SNAKE_CASE
    deserialization:
      fail-on-unknown-properties: false
    mapper:
      accept-case-insensitive-enums: true

management:
  server:
    address: 0.0.0.0
    port: 8081
  endpoint:
    health:
      probes:
        enabled: true

logging:
  level:
    root: INFO

telegram:
  bot:
    token: ${TELEGRAM_BOT_TOKEN}
    username: ${TELEGRAM_BOT_USERNAME}
    default-command: download
    share-text: '–°–ø—Ä–æ–±—É–π —Ü—å–æ–≥–æ –±–æ—Ç–∞ –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—ñ–¥–µ–æ –±–µ–∑ —Ä–µ–∫–ª–∞–º–∏!'
    promo-text: '–°–ø–æ–¥–æ–±–∞–≤—Å—è –±–æ—Ç? üí¨ –ü–æ–¥—ñ–ª–∏—Å—å —ñ–∑ –¥—Ä—É–∑—è–º–∏ –∞–±–æ –¥–æ–¥–∞–π —É —Å–≤–æ—é –≥—Ä—É–ø—É üëá'

downloader:
  media:
    base-dir: /downloads
    max-size:
      photo: 10MB
      video: 50MB
    cleanup:
      max-age: 3h
      max-total-size: 6GB
      interval: 1h
      initial-delay: 5m
  yt-dlp:
    enabled: true
    bin: yt-dlp
    format: 137+140/136+140/135+140/134+140/18/b[ext=mp4]/b
    timeout: 2m
    cookies-file: ${YTDLP_COOKIES_FILE:}
    user-agent: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36'
  gallery-dl:
    enabled: true
    bin: gallery-dl
    timeout: 1m
  instaloader:
    enabled: false
    bin: instaloader
    timeout: 2m
    session-file: ${INSTALOADER_SESSION_FILE:}
    user-agent: 'Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile'
  cache:
    media-ttl: 180d
    lock-ttl: 60s
    wait-timeout: 60s
    wait-poll: 1s
  concurrency:
    max-downloads: 5
  ratelimit:
    enabled: true
    namespace: rl
    global:
      capacity: 30
      refill:
        tokens: 30
        period: 1s
        greedy: true
    chat:
      capacity: 1
      refill:
        tokens: 1
        period: 1s
        greedy: true
    group:
      # max 20
      capacity: 5
      refill:
        tokens: 5
        period: 1m
        greedy: true
