spring:
  application:
    name: downloader-bot
  config:
    import: optional:file:.env[.properties]
  jackson:
    property-naming-strategy: SNAKE_CASE
    deserialization:
      fail-on-unknown-properties: false
    mapper:
      accept-case-insensitive-enums: true

logging:
  level:
    root: INFO

management:
  endpoints:
    web:
      exposure:
        include: health,info,beans

telegram:
  bot:
    token: ${DOWNLOADER_BOT_TOKEN}

downloader:
  media:
    base-dir: /downloads
    max-size:
      photo: 10MB
      video: 50MB
  sources:
    allow:
      - ^https?://([a-z0-9-]+\.)?tiktok\.com/@[^/]+/video/\d+(?:/|(?:\?.*)?)?$
      - ^https?://([a-z0-9-]+\.)?tiktok\.com/video/\d+(?:/|(?:\?.*)?)?$
      - ^https?://(www\.|m\.)?youtube\.com/shorts/[A-Za-z0-9_-]{11}(?:\?.*)?$
  yt-dlp:
    enabled: true
    format: 137+140/136+140/135+140/134+140/18/b[ext=mp4]/b
    bin: yt-dlp
  gallery-dl:
    enabled: false
    bin: gallery-dl
  cache:
    media-ttl: 7d
    lock-ttl: 60s
    wait-timeout: 60s
    wait-poll: 1s